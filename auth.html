<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
    <title>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='images/favicon.ico') }}">
</head>
<body>
    <nav class="navbar navbar-expand-lg text-white">
        <div class="container">
            <a class="navbar-brand text-white" href="{{ url_for('index') }}">
                <img src="static/images/logo.png" alt="–õ–æ–≥–æ—Ç–∏–ø" width="150" class="d-inline-block align-text-top"></a>

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                    <span class="navbar-toggler-icon"></span>
                </button>
                
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <div class="navbar-nav ms-auto">
                        <a href="{{ url_for('index') }}" class="btn btn-outline-light auth-page-link">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a> 
                    </div>
                </div>
         </div>
    </nav>

  <div class="container mt-5">
        <div class="row justify-content-center">
        
             <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
            <div class="card shadow auth-form active" id="loginForm">
                <div class="card-header bg-white text-center">
                     <h4 class="text-success mb-0">–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h4>
                </div>
                <div class="card-body">
                    <form>
                        <div class="mb-4">
                            <label>–õ–æ–≥–∏–Ω</label>
                            <div class="input-group">
                            <input type="text" class="form-control" name="username" required>
                            </div>
                        </div>               
                        <div class="mb-4">
                            <label>–ü–∞—Ä–æ–ª—å</label>
                            <input type="password" class="form-control" name="password" required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100 mb-3">–í–æ–π—Ç–∏</button>
                        <div class="text-center mt-3">
                            <a href="#" class="text-success" onclick="showRegisterForm()">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</a>
                        </div>
                    </form>
                </div>
            </div>
         </div>
                

                <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
                <div class="card shadow auth-form" id="registerForm">
                    <div class="card-header bg-white text-center">
                        <h4 class="text-success mb-0">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h4>
                    </div>
                    <div class="card-body">
                        <form id="registerForm">
                            <div class="mb-3">
                                <label>–ò–º—è</label>
                                <input type="text" class="form-control" required>
                            </div>
                            <div class="mb-3">
                                <label>Email</label>
                                <input type="email" class="form-control" required>
                            </div>
                            <div class="mb-3">
                                <label>–ü–∞—Ä–æ–ª—å</label>
                                <input type="password" class="form-control" required>
                            </div>
                            
                            <button type="submit" class="btn btn-primary w-100 mb-3">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                            
                            <div class="text-center">
                                <a href="#" class="text-success" onclick="showLoginForm()">–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? –í–æ–π—Ç–∏</a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>


    
    <script>
        function showRegisterForm() {
            document.getElementById('loginForm').classList.remove('active');
            document.getElementById('registerForm').classList.add('active');
        }

        function showLoginForm() {
            document.getElementById('registerForm').classList.remove('active');
            document.getElementById('loginForm').classList.add('active');
        }
    </script>


    <footer class="footer">
        <div class="container text-center">
            <!-- –õ–æ–≥–æ—Ç–∏–ø -->
            <img src="static/images/logo.png" alt="–õ–æ–≥–æ—Ç–∏–ø" width="120" class="d-inline-block align-text-top"></a>
            
               <!-- –°—Å—ã–ª–∫–∏ -->
               <nav class="footer-links">
                <a href="#" onclick="showContent('reviews'); return false">–û—Ç–∑—ã–≤—ã</a>
                <a href="#" onclick="showContent('support'); return false">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</a>
            </nav>
            <div id="reviews" class="content-block">
                <h3>–û—Ç–∑—ã–≤—ã –∫–ª–∏–µ–Ω—Ç–æ–≤</h3>
                <p>–ù–∞—à–∏ –∫–ª–∏–µ–Ω—Ç—ã –æ —Ä–∞–±–æ—Ç–µ —Å–∏—Å—Ç–µ–º—ã</p>
                <p>–ê–Ω–Ω–∞</p>
                ¬´–ó–∞ –¥–µ–Ω—å –¥–æ –∑–∞—â–∏—Ç—ã –¥–∏–ø–ª–æ–º–∞ –º–æ–π –ø—Ä–∏–Ω—Ç–µ—Ä —Ä–µ—à–∏–ª ¬´—É–π—Ç–∏ –≤ –æ—Ç–ø—É—Å–∫¬ª ‚Äî –Ω–µ –ø–µ—á–∞—Ç–∞–ª –≤–æ–æ–±—â–µ!
                –ó–∞—à–ª–∞ –≤ –≤–∞—à—É —Å–∏—Å—Ç–µ–º—É, –æ—Ñ–æ—Ä–º–∏–ª–∞ –∑–∞—è–≤–∫—É, –∏ —á–µ—Ä–µ–∑ —á–∞—Å –º–∞—Å—Ç–µ—Ä —É–∂–µ –±—ã–ª —É –º–µ–Ω—è.
                –û–∫–∞–∑–∞–ª–æ—Å—å, –∑–∞—Å—Ç—Ä—è–ª —Ä–æ–ª–∏–∫ –ø–æ–¥–∞—á–∏ –±—É–º–∞–≥–∏. –ü–æ—á–∏–Ω–∏–ª–∏ –∑–∞ 20 –º–∏–Ω—É—Ç,
                –∏ —è —É—Å–ø–µ–ª–∞ —Ä–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å –≤—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã. –°–ø–∞—Å–∏–±–æ, –≤—ã —Å–ø–∞—Å–ª–∏ –º–æ—é —Å–µ—Å—Å–∏—é! üòä¬ª
                <p></p>
                <p>–í–∞–ª–µ–Ω—Ç–∏–Ω–∞ –ü–µ—Ç—Ä–æ–≤–Ω–∞</p>
                ¬´–°—ã–Ω –ø–æ–¥–∞—Ä–∏–ª –Ω–æ–≤—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä, –∞ —è –µ–≥–æ —Å–ª—É—á–∞–π–Ω–æ –∑–∞–ª–∏–ª–∞ —á–∞–µ–º... 
                –ë–æ—è–ª–∞—Å—å, —á—Ç–æ —Å–ª–æ–º–∞–ª–∞ –Ω–∞–≤—Å–µ–≥–¥–∞. –í–Ω—É—á–∫–∞ –ø–æ–º–æ–≥–ª–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É —á–µ—Ä–µ–∑ –≤–∞—à —Å–∞–π—Ç.
                –ú–∞—Å—Ç–µ—Ä –ø—Ä–∏–µ—Ö–∞–ª –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å, –ø–æ—á–∏–Ω–∏–ª –≤—Å—ë, –µ—â–µ –∏ –æ–±—ä—è—Å–Ω–∏–ª, –∫–∞–∫ –∞–∫–∫—É—Ä–∞—Ç–Ω–µ–µ –æ–±—Ä–∞—â–∞—Ç—å—Å—è.
                –¢–µ–ø–µ—Ä—å –∑–Ω–∞—é: –¥–∞–∂–µ –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª—É—á–∏—Ç—Å—è ‚Äî –≤—ã –ø–æ–º–æ–∂–µ—Ç–µ! –°–ø–∞—Å–∏–±–æ –∑–∞ —Ç–µ—Ä–ø–µ–Ω–∏–µ!¬ª
            </div>
            
            <div id="support" class="content-block">
                <h3>–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞</h3>
                <p>–¢–µ–ª–µ—Ñ–æ–Ω: +7 (999) 999-99-99</p>
            </div>
        </div>
        <script>
// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
document.getElementById('registerForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const formData = {
        username: this.querySelector('input[name="username"]').value,
        email: this.querySelector('input[name="email"]').value,
        password: this.querySelector('input[name="password"]').value
    };

    fetch('/register', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(formData)
    })
    .then(response => response.json())
    .then(data => {
        if(data.success) {
            window.location.href = data.redirect; // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ –ø—Ä–æ—Ñ–∏–ª—å
        } else {
            alert(data.error || 'Registration failed');
        }
    });
});

// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞
document.getElementById('loginForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const formData = {
        username: this.querySelector('input[name="username"]').value,
        password: this.querySelector('input[name="password"]').value
    };

    fetch('/login', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(formData)
    })
    .then(response => response.json())
    .then(data => {
        if(data.success) {
            window.location.href = data.redirect || '/profile'; // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
        } else {
            alert('Invalid credentials');
        }
    });
});
</script>

        <script>
            // –ï–¥–∏–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
            function showContent(contentId) {
                // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –±–ª–æ–∫–∏
                document.querySelectorAll('.content-block').forEach(block => {
                    block.classList.remove('active');
                });
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—ã–π –±–ª–æ–∫
                const activeBlock = document.getElementById(contentId);
                if (activeBlock) {
                    activeBlock.classList.add('active');
                }
                
                // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –∫–æ–Ω—Ç–µ–Ω—Ç—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
                activeBlock.scrollIntoView({ behavior: 'smooth' });
            }
            </script>
    </footer>
   <script>
document.addEventListener('DOMContentLoaded', () => {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞
    document.querySelector('#loginForm form').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const formData = {
            username: e.target.querySelector('input[type="text"]').value,
            password: e.target.querySelector('input[type="password"]').value
        };

        try {
            const response = await fetch('/login', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(formData)
            });
            
            const data = await response.json();
            if(data.success) {
                window.location.href = '/profile';
            } else {
                alert('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ');
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞:', error);
        }
    });

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
    document.querySelector('#registerForm form').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const formData = {
            username: e.target.querySelector('input[type="text"]').value,
            email: e.target.querySelector('input[type="email"]').value,
            password: e.target.querySelector('input[type="password"]').value
        };

        try {
            const response = await fetch('/register', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(formData)
            });
            
            const data = await response.json();
            if(data.success) {
                alert('–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞! –¢–µ–ø–µ—Ä—å –≤–æ–π–¥–∏—Ç–µ');
                showLoginForm();
            } else {
                alert(data.error || '–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏');
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞:', error);
        }
    });

    function showLoginForm() {
        document.getElementById('registerForm').classList.remove('active');
        document.getElementById('loginForm').classList.add('active');
    }
});
</script>
</body>
</html>
